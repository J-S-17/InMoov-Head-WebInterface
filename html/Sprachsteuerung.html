<!DOCTYPE html>

<script>
	function startrecording() {
        document.getElementById("bigredone").src = "reddotC.png"
        document.getElementById("IN").innerHTML = "Waiting for Release"
		var xhttp = new XMLHttpRequest();
		xhttp.open("GET", "startrecording", true);
        xhttp.send();	
	}

	function stoprecording() {
        document.getElementById("bigredone").src = "reddot.png"

		var xhttp2 = new XMLHttpRequest();

        xhttp2.onreadystatechange = function () {
			if (this.readyState == 1) {
                document.getElementById("IN").innerHTML = "Loading"
            }

			if (this.readyState == 4 && this.status == 200) {
                var gesprochenerText = JSON.parse(this.responseText);
				
                document.getElementById("IN").innerHTML = gesprochenerText.intext
				document.getElementById("OUT").innerHTML = gesprochenerText.outtext
			}
		};
        xhttp2.open("GET", "stoprecording", true);  //initialisiert die Anfrage, mit async=true siehe https://developer.mozilla.org/de/docs/Web/API/XMLHttpRequest#send()
        xhttp2.send();
	}

</script>




<html lang="de">

	<head>
	
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<meta name="PI" content="PI">
		<link rel="icon" href="favicon.ico">
		<link rel="stylesheet" href="style.css">
		<title>PI</title>
		
	</head>
	
	<body>
		<header>
			<a class="ribbon" title="zurück zur Startseite!" href="index.html">
				<h1>Websteuerung Inmoov Head</h1>
				<p>Projektarbeitswebsite für das Fach Computertechnik</p>
			</a>  
		</header>
				
		<main>		
			
			
			<section id="image">
				<div class="parent">
					<h3>Push to talk!</h3> <br>
					<input type="image" id="bigredone" width=128 height=128  onmousedown="startrecording()" onmouseup="stoprecording()" src="reddot.png" >
					

				</div>
				<br>
				<br>
				<br>
				<br>
			</section>
			

			<section class="projekt">
				<h2>Gesprochener Text</h2>
				<p>IN : <span id="IN"> </span></p>
				<br>
				<p>OUT: <span id="OUT"> </span></p>
				
			</section>
		</main>

		<footer>
			<div id = "footer-links">
				<a href="unterseite_2.html" title="Kontakt"><img src="img_info.svg" alt="info"></a>
				<a href="#" title="Sitemap"><img src="img_sitemap.svg" alt="info"></a>
				<a href="unterseite_2.html" title="impressum"><img src="img_print.svg" alt="print"></a>
			</div>

			<div id = "footer-text">
				Design Template: <a href="http://selfhtml.org">selfhtml.org</a><br>
				
			</div>    
		</footer>  
			
	</body>
	
</html>


